/**
 * Styles for GitHub Actions Folder Organizer
 * Matching GitHub's Primer CSS design system
 */

/* Loading Overlay */
.gaf-loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 100;
  backdrop-filter: blur(2px);
  pointer-events: none;
}

.gaf-loading-spinner {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
}

.gaf-loading-spinner svg {
  animation: gaf-spin 1s linear infinite;
  color: var(--color-fg-muted, #656d76);
}

@keyframes gaf-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Dark mode support for loading overlay */
[data-color-mode="dark"] .gaf-loading-overlay {
  background-color: rgba(13, 17, 23, 0.8);
}

@media (prefers-color-scheme: dark) {
  [data-color-mode="auto"] .gaf-loading-overlay {
    background-color: rgba(13, 17, 23, 0.8);
  }
}

/* Container */
.gaf-folder-container {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px;
  margin: 0;
}

/* Folder */
.gaf-folder {
  border: 1px solid var(--color-border-default, #d0d7de);
  border-radius: 6px;
  overflow: hidden;
  background-color: var(--color-canvas-default, #ffffff);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  transition: box-shadow 0.2s ease;
}

.gaf-folder:hover {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Dark mode: explicit dark mode */
[data-color-mode="dark"] .gaf-folder {
  background-color: var(--color-canvas-default, #0d1117);
  border-color: var(--color-border-default, #30363d);
}

[data-color-mode="dark"] .gaf-folder:hover {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

/* Auto mode with system dark preference */
@media (prefers-color-scheme: dark) {
  [data-color-mode="auto"] .gaf-folder {
    background-color: var(--color-canvas-default, #0d1117);
    border-color: var(--color-border-default, #30363d);
  }

  [data-color-mode="auto"] .gaf-folder:hover {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }
}

/* Folder Header */
.gaf-folder-header {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 10px 16px;
  background: var(--color-canvas-default, #ffffff);
  border: none;
  cursor: pointer;
  color: var(--color-fg-default, #24292f);
  font-size: 14px;
  font-weight: 600;
  text-align: left;
  transition: background-color 0.2s ease;
}

.gaf-folder-header:hover {
  background-color: var(--color-canvas-subtle, #f6f8fa);
}

.gaf-folder-header:focus {
  outline: 2px solid var(--color-accent-emphasis, #0969da);
  outline-offset: -2px;
}

/* Dark mode support */
[data-color-mode="dark"] .gaf-folder-header {
  color: var(--color-fg-default, #c9d1d9);
  background: var(--color-canvas-default, #0d1117);
}

[data-color-mode="dark"] .gaf-folder-header:hover {
  background-color: var(--color-canvas-subtle, #161b22);
}

@media (prefers-color-scheme: dark) {
  [data-color-mode="auto"] .gaf-folder-header {
    color: var(--color-fg-default, #c9d1d9);
    background: var(--color-canvas-default, #0d1117);
  }

  [data-color-mode="auto"] .gaf-folder-header:hover {
    background-color: var(--color-canvas-subtle, #161b22);
  }
}

/* Folder Icon */
.gaf-folder-icon {
  display: inline-block;
  width: 16px;
  margin-right: 8px;
  font-size: 10px;
  color: var(--color-fg-muted, #57606a);
  transition: transform 0.2s ease;
}

/* Folder Title */
.gaf-folder-title {
  flex: 1;
  font-weight: 600;
}

/* Folder Count */
.gaf-folder-count {
  margin-left: 8px;
  color: var(--color-fg-muted, #57606a);
  font-size: 12px;
  font-weight: 400;
}

/* Folder Content */
.gaf-folder-content {
  display: block;
  padding: 4px 8px 8px 8px;
  border-top: 1px solid var(--color-border-muted, #d0d7de);
  background-color: var(--color-canvas-subtle, #f6f8fa);
}

[data-color-mode="dark"] .gaf-folder-content {
  background-color: var(--color-canvas-subtle, #161b22);
  border-top-color: var(--color-border-muted, #21262d);
}

@media (prefers-color-scheme: dark) {
  [data-color-mode="auto"] .gaf-folder-content {
    background-color: var(--color-canvas-subtle, #161b22);
    border-top-color: var(--color-border-muted, #21262d);
  }
}

/* Workflow Links */
.gaf-workflow-link {
  display: flex;
  align-items: center;
  padding: 6px 12px;
  color: var(--color-fg-default, #24292f);
  text-decoration: none;
  font-size: 14px;
  border-radius: 6px;
  margin: 2px 0;
  transition: background-color 0.2s ease;
}

.gaf-workflow-link:hover {
  background-color: var(--color-neutral-muted, rgba(175, 184, 193, 0.2));
  text-decoration: none;
}

.gaf-workflow-link:focus {
  outline: 2px solid var(--color-accent-emphasis, #0969da);
  outline-offset: -2px;
}

[data-color-mode="dark"] .gaf-workflow-link {
  color: var(--color-fg-default, #c9d1d9);
}

[data-color-mode="dark"] .gaf-workflow-link:hover {
  background-color: var(--color-neutral-muted, rgba(110, 118, 129, 0.4));
}

@media (prefers-color-scheme: dark) {
  [data-color-mode="auto"] .gaf-workflow-link {
    color: var(--color-fg-default, #c9d1d9);
  }

  [data-color-mode="auto"] .gaf-workflow-link:hover {
    background-color: var(--color-neutral-muted, rgba(110, 118, 129, 0.4));
  }
}

/* Active/Selected state */
.gaf-workflow-link[aria-current="page"] {
  background-color: var(--color-accent-subtle, #ddf4ff);
  font-weight: 600;
}

[data-color-mode="dark"] .gaf-workflow-link[aria-current="page"] {
  background-color: var(--color-accent-subtle, #0c2d6b);
}

@media (prefers-color-scheme: dark) {
  [data-color-mode="auto"] .gaf-workflow-link[aria-current="page"] {
    background-color: var(--color-accent-subtle, #0c2d6b);
  }
}

/* Collapsed state */
.gaf-folder-header[aria-expanded="false"] + .gaf-folder-content {
  display: none;
}

/* Animation for smooth expand/collapse */
.gaf-folder-content {
  overflow: hidden;
  transition: max-height 0.3s ease-in-out;
}

/* Accessibility - Focus visible */
.gaf-folder-header:focus-visible,
.gaf-workflow-link:focus-visible {
  outline: 2px solid var(--color-accent-emphasis, #0969da);
  outline-offset: -2px;
}

/* GitHub's sidebar padding override */
.PageLayout-sidebar .gaf-folder-container {
  margin: -16px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .gaf-folder-header {
    padding: 6px 12px;
    font-size: 13px;
  }

  .gaf-workflow-link {
    padding: 5px 12px;
    font-size: 13px;
  }

  .gaf-folder-content {
    padding-left: 20px;
  }
}

/* Loading State */
.gaf-loading-container {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px;
  margin: 0;
}

.gaf-skeleton-folder {
  border: 1px solid var(--color-border-default, #d0d7de);
  border-radius: 6px;
  overflow: hidden;
  background-color: var(--color-canvas-default, #ffffff);
}

.gaf-skeleton-header {
  height: 42px;
  background: linear-gradient(
    90deg,
    var(--color-canvas-subtle, #f6f8fa) 0%,
    var(--color-canvas-default, #ffffff) 50%,
    var(--color-canvas-subtle, #f6f8fa) 100%
  );
  background-size: 200% 100%;
  animation: gaf-skeleton-loading 1.5s ease-in-out infinite;
}

@keyframes gaf-skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

[data-color-mode="dark"] .gaf-skeleton-folder {
  background-color: var(--color-canvas-default, #0d1117);
  border-color: var(--color-border-default, #30363d);
}

[data-color-mode="dark"] .gaf-skeleton-header {
  background: linear-gradient(
    90deg,
    var(--color-canvas-subtle, #161b22) 0%,
    var(--color-canvas-default, #0d1117) 50%,
    var(--color-canvas-subtle, #161b22) 100%
  );
}

@media (prefers-color-scheme: dark) {
  [data-color-mode="auto"] .gaf-skeleton-folder {
    background-color: var(--color-canvas-default, #0d1117);
    border-color: var(--color-border-default, #30363d);
  }

  [data-color-mode="auto"] .gaf-skeleton-header {
    background: linear-gradient(
      90deg,
      var(--color-canvas-subtle, #161b22) 0%,
      var(--color-canvas-default, #0d1117) 50%,
      var(--color-canvas-subtle, #161b22) 100%
    );
  }
}

/* Toggle Button */
.gaf-toggle-container {
  padding: 16px 8px 8px 8px;
  margin-top: 8px;
  border-top: 1px solid var(--color-border-default, #d0d7de);
}

.gaf-toggle-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 8px 16px;
  background-color: var(--color-canvas-subtle, #f6f8fa);
  border: 1px solid var(--color-border-default, #d0d7de);
  border-radius: 6px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-fg-muted, #57606a);
  transition: all 0.2s ease;
}

/* Create Config Button - More prominent styling */
.gaf-create-config-button {
  background-color: var(--color-accent-emphasis, #0969da);
  border-color: var(--color-accent-emphasis, #0969da);
  color: #ffffff !important;
}

.gaf-create-config-button .gaf-toggle-label,
.gaf-create-config-button .gaf-toggle-icon {
  color: #ffffff !important;
}

.gaf-create-config-button:hover {
  background-color: var(--color-accent-fg, #0550ae);
  border-color: var(--color-accent-fg, #0550ae);
  box-shadow: 0 2px 4px rgba(9, 105, 218, 0.3);
  color: #ffffff !important;
}

.gaf-toggle-button:hover {
  background-color: var(--color-canvas-default, #ffffff);
  border-color: var(--color-border-muted, #d0d7de);
  color: var(--color-fg-default, #24292f);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.gaf-toggle-button:focus {
  outline: 2px solid var(--color-accent-emphasis, #0969da);
  outline-offset: 2px;
}

.gaf-toggle-button:active {
  transform: scale(0.98);
}

.gaf-toggle-button[aria-pressed="true"] {
  background-color: var(--color-success-subtle, #dafbe1);
  border-color: var(--color-success-emphasis, #1a7f37);
  color: var(--color-success-fg, #1a7f37);
}

.gaf-toggle-button[aria-pressed="false"] {
  background-color: var(--color-neutral-subtle, #f6f8fa);
  border-color: var(--color-border-default, #d0d7de);
  color: var(--color-fg-muted, #57606a);
}

.gaf-toggle-icon {
  display: inline-block;
  margin-right: 6px;
  font-size: 14px;
  font-weight: 700;
}

.gaf-toggle-label {
  font-size: 12px;
  font-weight: 500;
}

[data-color-mode="dark"] .gaf-toggle-container {
  border-top-color: var(--color-border-default, #30363d);
}

[data-color-mode="dark"] .gaf-toggle-button {
  background-color: var(--color-canvas-subtle, #161b22);
  border-color: var(--color-border-default, #30363d);
  color: var(--color-fg-muted, #8b949e);
}

[data-color-mode="dark"] .gaf-toggle-button:hover {
  background-color: var(--color-canvas-default, #0d1117);
  border-color: var(--color-border-muted, #30363d);
  color: var(--color-fg-default, #c9d1d9);
}

[data-color-mode="dark"] .gaf-toggle-button[aria-pressed="true"] {
  background-color: var(--color-success-subtle, #033a16);
  border-color: var(--color-success-emphasis, #2ea043);
  color: var(--color-success-fg, #3fb950);
}

[data-color-mode="dark"] .gaf-toggle-button[aria-pressed="false"] {
  background-color: var(--color-canvas-subtle, #161b22);
  border-color: var(--color-border-default, #30363d);
  color: var(--color-fg-muted, #8b949e);
}

[data-color-mode="dark"] .gaf-create-config-button {
  background-color: var(--color-accent-emphasis, #1f6feb);
  border-color: var(--color-accent-emphasis, #1f6feb);
  color: #ffffff !important;
}

[data-color-mode="dark"] .gaf-create-config-button .gaf-toggle-label,
[data-color-mode="dark"] .gaf-create-config-button .gaf-toggle-icon {
  color: #ffffff !important;
}

[data-color-mode="dark"] .gaf-create-config-button:hover {
  background-color: var(--color-accent-fg, #58a6ff);
  border-color: var(--color-accent-fg, #58a6ff);
  box-shadow: 0 2px 4px rgba(31, 111, 235, 0.3);
  color: #ffffff !important;
}

@media (prefers-color-scheme: dark) {
  [data-color-mode="auto"] .gaf-toggle-container {
    border-top-color: var(--color-border-default, #30363d);
  }

  [data-color-mode="auto"] .gaf-toggle-button {
    background-color: var(--color-canvas-subtle, #161b22);
    border-color: var(--color-border-default, #30363d);
    color: var(--color-fg-muted, #8b949e);
  }

  [data-color-mode="auto"] .gaf-toggle-button:hover {
    background-color: var(--color-canvas-default, #0d1117);
    border-color: var(--color-border-muted, #30363d);
    color: var(--color-fg-default, #c9d1d9);
  }

  [data-color-mode="auto"] .gaf-toggle-button[aria-pressed="true"] {
    background-color: var(--color-success-subtle, #033a16);
    border-color: var(--color-success-emphasis, #2ea043);
    color: var(--color-success-fg, #3fb950);
  }

  [data-color-mode="auto"] .gaf-toggle-button[aria-pressed="false"] {
    background-color: var(--color-canvas-subtle, #161b22);
    border-color: var(--color-border-default, #30363d);
    color: var(--color-fg-muted, #8b949e);
  }

  [data-color-mode="auto"] .gaf-create-config-button {
    background-color: var(--color-accent-emphasis, #1f6feb);
    border-color: var(--color-accent-emphasis, #1f6feb);
    color: #ffffff !important;
  }

  [data-color-mode="auto"] .gaf-create-config-button .gaf-toggle-label,
  [data-color-mode="auto"] .gaf-create-config-button .gaf-toggle-icon {
    color: #ffffff !important;
  }

  [data-color-mode="auto"] .gaf-create-config-button:hover {
    background-color: var(--color-accent-fg, #58a6ff);
    border-color: var(--color-accent-fg, #58a6ff);
    box-shadow: 0 2px 4px rgba(31, 111, 235, 0.3);
    color: #ffffff !important;
  }
}
